<html>
  <head>
    <title>RazorFlow Embedded Dashboard</title>
    <script src="../javascripts/jquery-1.11.2.min.js" type="text/javascript"></script>
    <script src="../rf/razorflow.jquery.js" type="text/javascript"></script>

    <script type='text/javascript'>
      $(document).ready(function(){
        $("#dashboardTarget").razorflow({
          url: './dashboardv2.php',
     height: 768, // 800 pixels
    width: 1024 // 600 pixels
        });
      });
    </script>
  </head>
  <body>
    <h2>Perf Management</h2>

  <p id="startformhtml" ></p>
    <div id="dashboardTarget"></div>


<script type="text/javascript">
var myGET = getQueryParams(document.location.search);
if (! jQuery.isEmptyObject(myGET))
{
var fromyyyymmhtml = myGET['fromdate'];
var toyyyymmhtml = myGET['todate'];
}
else{
var d = new Date();
var yyyy = d.getFullYear();
var mm = d.getMonth()+1 - 12 ;
var yyyymm;
var tomm =  d.getMonth()+1;

if(tomm<10)
	{
	toyyyymmhtml=String(yyyy)+"-0"+String(tomm);
	}
	else
	{
	toyyyymmhtmlyyyymm=String(yyyy)+"-"+String(tomm)	;	
	}
if (mm <=0)
{
	yyyy=yyyy-1;
	mm=12+mm;
	if(mm<10)
	{
	fromyyyymmhtml=String(yyyy)+"-0"+String(mm);
	}
	else
	{
	fromyyyymmhtmlyyyymm=String(yyyy)+"-"+String(mm)	;	
	}
}
else
{
	fromyyyymmhtmlyyyymm=String(yyyy)+"-0"+String(mm);
}
}
var yyyymm = fromyyyymmhtml.replace('-','');
//console.log(yyyymm);
var formhtml="<form id=\"startdateform\" action=\"dashboard.html\" ><table><tr><td>From  :</td><td><Input Name=\"fromdate\" type=\"month\" size=\"6\" id=\"fromdate\" value="+fromyyyymmhtml+" ></td><td>To  :</td><td><Input Name=\"todate\" type=\"month\" size=\"6\" id=\"todate\" value="+toyyyymmhtml+" ></td></tr><tr><td><INPUT id=\"REFRESH\" TYPE=\"SUBMIT\" VALUE=\"REFRESH\" onclick=\"myFunction()\"></td><td> &nbsp</td><td> &nbsp</td><td> &nbsp</td></tr></table></form>";
document.getElementById("startformhtml").innerHTML = formhtml;
GetResult( yyyymm );

function myFunction() {
    document.getElementById("startdateform").submit();
}
function getQueryParams(qs) {
    qs = qs.split("+").join(" ");
    var params = {},
        tokens,
        re = /[?&]?([^=]+)=([^&]*)/g;
    while (tokens = re.exec(qs)) {
        params[decodeURIComponent(tokens[1])]
            = decodeURIComponent(tokens[2]);
    }
    return params;
}
</script>

  </body>
</html>
